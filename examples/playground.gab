def test = { a:1 }

def inc(arg)
    arg['a'] = (arg['a'] or 0) + 1
end

print(test.a)

inc(test)

print(test.a)

def __set__[{ a }?](key, val)
    print('Setting a to {val}')
    self.a = val
end

def __get__[{ a }?](key)
    print('Getting a')
    self.a
end

inc(test)

print(test.a)

print(inc({ }))

inc(test)

print(test.a)

inc(test)

print(test.a)

print(inc({ }))

inc(test)

print(test.a)
