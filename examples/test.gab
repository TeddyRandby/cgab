\do_acc :defcase! {
  .true  = do acc: acc end,
  .false = do acc, n: [n, acc:acc(n - 1)**] end, 
}

\acc :def!(['gab.record'], do n:
  n :== 0 :do_acc (self, n)
end)

\go :def!(['gab.block'], do:
  blk = self
  .gab.fiber do: blk() end
end)

in, out = .gab.channel(), .gab.channel()

work = do: out <! [] :acc (in >!) :len end

work :go
work :go
work :go

fib = do:
  in <! 400
  in <! 500
  in <! 600
end :go

fib:print

(out >!, out >!, out >!) :print
