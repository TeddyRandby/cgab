def _for[.gab.suspense](p, cb)
  cb(..p)

  ..args, s = self()

  s:_for(args, cb)
end

def _for[](p, cb); cb(..p) end

def for[](msg, ..p, cb)
  ..args, s = self:(msg)(..p)

  s:_for(args, cb)
end

:use .lists

:list.new(500000):for(&:values) do (val)
  val == nil
end
