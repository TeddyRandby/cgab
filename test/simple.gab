
# A point in 2D space
def Point { x y }

def add[Point](other)
  return ?other match
    Point => { x = self.x + other.x y = self.y + other.y } end
    else  => .TYPE_ERROR:panic end
end

origin = { x = 0 y = 0 }

origin in
  :add { x = 1 y = 2 } in
  :add { x = 1 y = 2 } in
  :add { x = 1 y = 2 } in
  :print
