impl Any
    def some?[] true end

    def ok? true end

    def value![] self end

    def value_or[](alt) self end

    def value_else[](cb) self end
end

impl nil
    def some? false end

    def value! panic() end

    def value_or(alt) alt end

    def value_else(cb) cb() end
end

def Err { err }

def err[] { err = self } end

impl Err
    def ok? false end

    def value! panic(self.err) end

    def value_or(alternative) alternative end

    def value_else(cb) cb() end
end
