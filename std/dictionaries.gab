:use 'dict'

def [][.Dictionary](key)
  status, value = self:at(key) in
    match
      .some => value end
      else => nil end
end

def [=][Dictionary](key, value); self:put!(key, value); end

def has[Dictionary](key); self:at(key) == .some; end

def del[Dictionary](key); self:put!(key, nil); end

def each[Dictionary]
  key = self:next

  loop
    yield key, self:at(key)
    key = self:next(key)
  until key == nil end
end
