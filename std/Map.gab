require('map')

impl Map
    def [] (key) self:at(key) end

    def [=] (key, value) self:put(key, value) end

    def has(key) not self:at(key) == nil end

    def del(key) self:put(key, nil) end

    def each
      let key = self:next

      loop
        yield key, self:at(key)
        key = self:next(key)
      until key == nil
    end
end
